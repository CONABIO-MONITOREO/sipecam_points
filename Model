// Creating tables
Table Users as U {
  id int [pk, increment] // auto-increment
	username varchar
	password varchar 
	last_login timestampt
	first_name varchar 
	last_name varchar
	grade varchar 
	email varchar 
	address varchar
	is_active boolean 
	date_joined timestampt
	comments varchar
  role int
  institution_id int
  created_at timestamp
}


Table Nodes as N {
  id int [pk, increment] // auto-increment
  user_id int
  has_parnet boolean
	ecosystem_id int
	cumululus_id int
	partner_id int
	id_sipe varchar  //?
  fid int
  latitude float8
  longitude float8
	altitude int4 
	cat_itegr varchar 
	anpmarcelo boolean //?
	by_fauna int4 
  geometry point
  integrity boolean
  created_at timestamp
  updated_at timestamp
}

Table Institutions as I {
  id int [pk, increment] // auto-increment
   address varchar
   name varchar
   phone_number int
   
}

Table Ecosystems as E {
  id int [pk, increment] // auto-increment
  node_id int
  name varchar [not null, unique]
  geometry point
  created_at timestamp
  
}

Table Cumulus as C {
  id int [pk, increment] // auto-increment
  name varchar
  node_id int
  geometry polygon
  created_at timestamp
}

Table Cumulus_criteria as CC {
  id int [pk, increment] // auto-increment
  cumulus_id int
  name varchar
  
  created_at timestamp
}




Table Visits as V {
  id int [pk, increment] // auto-increment
  user_id int
  device_id int
  calendar_id int
  node_id int
  created_at timestamp
  updated_at timestamp
}



// Posibles Roles
// Monitor
// Socio
// Admin
// 
Table Roles as R {
  id int [pk, increment] // auto-increment
  permission_id int
  roles varchar
}



Table Physical_Devices as D {
  id int [pk, increment] // auto-increment
  node_id int
  device_id int
  serial varchar
  created_at timestamp
}

Table Devices_Catalog as DC {
  id int [pk, increment] // auto-
  cumulus_id int
  brand varchar
  type varchar
  model varchar
  serial_number varchar
}

Table Calendar as Cal {
  id int [pk, increment] // auto-increment
  node_id int
  date_started date
  date_finished date
  created_at timestamp
}

Table Permissions as Per {
  id int [pk, increment] // auto-increment
  role_id int
  read boolean
  write boolean
  create boolean
  created_at timestamp
}

Table Deployments as Dep {
  id int [pk, increment] // auto-increment
  device_id int
  date_started date
  date_finished date
  latitude float8
  longitude float8
  altitude float8
  notes varchar
}

Table PartnersCumulus as Pacu {
  id int [pk, increment] // auto-increment
  user_id int
  cumulus_id int
}

// Relaciones uno a uno
Ref: N.(id) - E.(node_id)
Ref: N.(id) - D.(node_id)
Ref: N.(id) - V.(node_id)
Ref: C.(id) - CC.(cumulus_id)
Ref: N.(id) - Cal.(node_id)
Ref: U.id - C.(id)
Ref: Dep.(id) - D.(id)
Ref: C.(id) - DC.(cumulus_id)



// Relaciones Muchos a Uno
Ref: R.id > Per.id
Ref: V.id > D.(id)
Ref: N.(id) > C.(node_id)
Ref: D.(device_id) > DC.id


// Relaciones Uno a Muchos
Ref: U.role < R.id
Ref: Cal.id < V.id
Ref: Pacu.(user_id) < U.(id)
Ref: Pacu.(cumulus_id) < C.(id)
Ref: U.(id) < N.(user_id)
Ref: V.(user_id) < U.(id)
Ref: I.(id) < U.(institution_id)


Ref: "Cumulus_criteria"."id" < "Nodes"."cumululus_id"
